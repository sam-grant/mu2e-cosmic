# Samuel Grant 2025
# Define cutsets for cosmic-ray-induced background analysis

##########################################################
# Define baseline defaults (DO NOT EDIT!)
##########################################################
defaults:
    description: "Baseline defaults"
    thresholds:
        track_pdg: 11 
        lo_nactive: 20 
        lo_trkqual: 0.8
        lo_t0_ns: 640
        hi_t0_ns: 1650
        lo_maxr_mm: 450
        hi_maxr_mm: 680
        hi_d0_mm: 100
        hi_t0err: 0.9 
        lo_pitch_angle: 0.5
        hi_pitch_angle: 1.0 
        lo_veto_dt_ns: -150.0
        hi_veto_dt_ns: 150.0
        lo_wide_win_mevc: 85
        hi_wide_win_mevc: 200
        lo_ext_win_mevc: 100
        hi_ext_win_mevc: 110
        lo_sig_win_mevc: 103.6
        hi_sig_win_mevc: 104.9
    active:
        is_reco_electron: true
        has_trk_front: true
        has_trk_mid: true
        good_trkqual: true
        within_t0: true
        is_downstream: true
        has_hits: true
        within_t0err: true
        within_d0: true
        within_pitch_angle_lo: true
        within_pitch_angle_hi: true
        within_lhr_max_lo: true
        within_lhr_max_hi: true
        is_truth_electron: true
        one_reco_electron: true
        unvetoed: true
        within_wide_win: true
        within_ext_win: true
        within_sig_win: true

##########################################################
# Define custom cutsets which are overridden from defaults
# You can turn cuts off and edit thresholds here
##########################################################
cutsets:
    ########################
    # Analysis cut sets
    ########################
    
    alpha:
        description:
            "baseline cutset with loop helix parameters"      
            
    beta:
        description:
            "alpha with no R_max cut"
        active:
            within_lhr_max_hi: false
            within_lhr_max_lo: false
            
    gamma:
        description:
            "Loose cuts (alpha with no R_max and trkqual > 0.2)"
        active:
            within_lhr_max_hi: false
            within_lhr_max_lo: false
            lo_trkqual: 0.2

    SU2020a:
        description:
            "SU2020a (trkqual > 0 (none) and t0err < 0.9 ns)"
        active:
            within_lhr_max_lo: false
            good_trkqual: false
        
    SU2020b:
        description:
            "SU2020b cuts (trkqual > 0.2)"
        active:
            within_lhr_max_lo: false
        thresholds:
            lo_trkqual: 0.2

    SU2020c:
        description:
            "SU2020c cuts (trkqual > 0.8)"
        active:
            within_lhr_max_lo: false

    SU2020d:
        description:
            "SU2020d cuts (t0err > 0 ns)"
        active:
            within_lhr_max_lo: false
            within_t0err: false
            
    SU2020e:
        description:
            "SU2020e cuts (trkqual > 0.2 and t0err > 0 ns)"
        active:
            within_lhr_max_lo: false
            within_t0err: false
        thresholds:
            lo_trkqual: 0.2

    SU2020f:
        description:
            "SU2020f cuts (trkqual > 0.8 and t0err > 0 ns)"
        active:
            within_lhr_max_lo: false
            within_t0err: false

    MLPreprocess:
        description:
            "Preselection cuts for ML"
        thresholds:
            lo_trkqual: 0.2
        active:
            is_reco_electron: true
            has_trk_front: true
            has_trk_mid: true
            within_t0: true
            is_downstream: true
            is_truth_electron: true
            one_reco_electron: true
            good_trkqual: true
            has_hits: true
            within_t0err: true
            within_d0: false
            within_pitch_angle_lo: false
            within_pitch_angle_hi: false
            within_lhr_max_lo: false
            within_lhr_max_hi: false
            unvetoed: false
            within_wide_win: false
            within_ext_win: false
            within_sig_win: false
            
    # MLPreprocessVeto:
    #     description:
    #         "Preselection cuts for ML (veto optimisation)"
    #     active:
    #         is_reco_electron: true
    #         has_trk_front: true
    #         within_t0: true
    #         is_downstream: true
    #         is_truth_electron: true
    #         one_reco_electron: true
    #         good_trkqual: true
    #         has_hits: true
    #         within_t0err: true
    #         within_d0: false
    #         within_pitch_angle_lo: false
    #         within_pitch_angle_hi: false
    #         within_lhr_max_lo: false
    #         within_lhr_max_hi: false
    #         unvetoed: false
    #         within_wide_win: false
    #         within_ext_win: false
    #         within_sig_win: false

    dev:
        description:
            "CRV developement cuts"
        active:
            within_lhr_max_lo: false
        thresholds:
            lo_trkqual: 0.2
            lo_veto_dt_ns: -25.0
            